<script>
    $(document).ready(() => {
        $("#posts-btn").on('click', () => {
            const url = window.location.href + '/sort?by=posts'
            fetch(url).then((res) => {})
        })

        $("#comments-btn").on('click', () => {
            const url = window.location.href + '/sort?by=comments'
            fetch(url).then((res) => {})
        })

        $("#upvotedPosts-btn").on('click', () => {
            const url = window.location.href + '/sort?by=upvotedPosts'
            fetch(url).then((res) => {})
        })

        $("#downvotedPosts-btn").on('click', () => {
            const url = window.location.href + '/sort?by=downvotedPosts'
            fetch(url).then((res) => {})
        })
    })
</script>

<div id="profile-body">
    <div id="profile-body-left">
        <div id="hotbar">
            <button id="posts-btn" class="btn btn-primary hotbar-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sticky-fill" viewBox="0 0 16 16">
                <path d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 15 8.586V2.5A1.5 1.5 0 0 0 13.5 1h-11zm6 8.5a1 1 0 0 1 1-1h4.396a.25.25 0 0 1 .177.427l-5.146 5.146a.25.25 0 0 1-.427-.177V9.5z"/>
                </svg>Posts
            </button> 
            <button id="comments-btn" class="btn btn-primary hotbar-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-fill" viewBox="0 0 16 16">
                <path d="M8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6-.097 1.016-.417 2.13-.771 2.966-.079.186.074.394.273.362 2.256-.37 3.597-.938 4.18-1.234A9.06 9.06 0 0 0 8 15z"/>
                </svg>Comments
            </button> 
            <button id="upvotedPosts-btn" class="btn btn-primary hotbar-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/>
                </svg>Upvoted Posts
            </button> 
            <button id="downvotedPosts-btn" class="btn btn-primary hotbar-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"/>
                </svg>Downvoted Posts
            </button> 
        </div>

        <div id="content-container">

            {{!-- {{#if_equal type "comments"}}
                {{#each toRender}}
                {{#include user_auth=../user_auth}}
                    {{> comment}}
                {{/include}}
                {{/each}}
            {{else}}
                {{#each toRender}}
                {{#include user_auth=../user_auth}}
                    {{> post}}
                {{/include}}
                {{/each}}
            {{/if_equal}} --}}
            <div>{{posts}}</div>
            {{#if posts}}
                {{#each toRender}}
                {{#include user_auth=../user_auth}}
                    {{> post}}
                {{/include}}
                {{/each}}
            {{else}}
                {{#each toRender}}
                {{#include user_auth=../user_auth}}
                    {{> comment}}
                {{/include}}
                {{/each}}
            {{/if}}
        </div>
    </div>

    <div id="profile-body-right">
        <div id="profile-box">
            <div class="center"><img src="../images/users-pfp/{{ user.pfp_path }}" id="user-photo"></div>
            <div class="center" id="user-info">
                <div id="username" class="center">{{ user.usertag }}</div>
                <div id="user-tag" class="center">u/{{ user.username }}</div>
            </div>
            <div class="center" id="change-pic">Change Profile Picture</div>
            <a class="center" id="new-post" href="/posts/new">New Post</a>
        </div>
        <div id="bio-box">
            <p id="bio">BIO</p>
            <p id="bio-cont">{{ user.bio }}</p>
        </div>
    </div>
</div>